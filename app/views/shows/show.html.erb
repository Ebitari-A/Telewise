<div class="text-white">
  <div class="container py-3">
    <div class="row">
      <div class="col-md-4">
        <%= image_tag "#{@show.name.gsub(/\s+/, "")}.jpg", style: "width: 100%", class: 'img-fluid' %>
      </div>
      <div class="col-md-8">
        <h1><%= @show.name %></h1>
        <p class="hover-3-rating small text-uppercase mb-0">
          <%= '⭐ ' * (@show.rating.round / 2) %>
        </p>
        <p><%= @show.summary %></p>
        <p>Seasons: <%= @show.number_of_seasons %></p>
        <% @streaming.each do |service| %>
        <ul>
          <li><a href="<%= service[1] %>" target="_blank"><%= service[0] %></a></li>
        </ul>
        <% end %>
        <%= render "followed_shows/form", locals: {show: @show, followed_show: @followed_show} %>
        <div>
          <% if current_user %>
            <%= render "reviews/review_modal", locals: {show: @show, followed_show: @followed_show} %>
          <% else %>
            <p><%= link_to 'Add Review', new_user_registration_path, class: "btn btn-primary" %></p>
          <% end %>
        </div>
      </div>
    </div>
  </div>
</div>

<% count = 1 %> <% @show.number_of_seasons.times do %>
<div class="container border rounded p-3 mb-3 mt-4 text-white">
  <div class="progress">
    <div
      class="progress-bar"
      role="progress-bar"
      aria-valuenow="70"
      aria-valuemin="0"
      aria-valuemax="100"
      style="width: 30%"
    ></div>
  </div>
  <p><strong>Season <%= count %></strong></p>
  <p><small><%= @show.summary %></small></p>
  <p>
    <%= link_to 'Details', show_season_summaries_path(@show, season: count), class: "btn
    btn-success" %>
  </p>
</div>
<% count += 1 %>
<% end %>

<div class="container">
  <div class="col-12 col-sm-6">
    <h3>Reviews</h3>
    <% if @reviews.empty? %>
      <small><em class="text-muted">Be the first one to review this show</em></small>
    <% end %>
    <% @reviews.each do |review| %>
      <div>
        <small><em class="text-muted"><%= review.user.name %><%= distance_of_time_in_words_to_now(review.created_at) %> ago</em></small>
        <p class="mb-0"><%= review.content %></p>
      </div>
    <% end %>
  </div>
</div>
